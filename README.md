# 中文智能问答系统

## 项目简介

本项目是一个基于 TF-IDF、编辑距离与倒排索引的中文智能问答系统，支持自定义问答对的存储与高效检索，适用于 FAQ、知识库等场景。

## 主要特性

- 支持中文分词（基于 jieba）
- TF-IDF 问题向量化与余弦相似度匹配
- 编辑距离二次验证，提升匹配准确率
- 关键词倒排索引加速候选筛选
- 问答对持久化存储（需配合 db_manager.py 和数据库）

## 依赖环境

- Python 3.10+

安装依赖：

```bash
pip install -r requirements.txt
```

## 快速开始

1. 确保数据库和 `db_manager.py` 已正确配置。
2. 运行主程序：
   ```bash
   python qa_system.py
   ```
3. 按提示输入问题，系统将返回最匹配的数据库原句、答案及相似度。

## 用法示例

```
请输入问题: 你会什么
问题: 你会什么
数据库原句: 你会做什么
匹配答案: 我会回答你的问题 (相似度: 0.82)
```

## 算法说明

1. **分词与向量化**：
   - 使用 jieba 对中文文本进行分词。
   - 通过 TfidfVectorizer 将所有问题转为 TF-IDF 向量。
2. **倒排索引**：
   - 为每个关键词建立倒排索引，快速筛选包含关键词的候选问题。
3. **相似度计算**：
   - 对候选问题，计算与输入问题的 TF-IDF 余弦相似度。
   - 取相似度最高的候选，再用编辑距离（difflib.SequenceMatcher）计算文本相似度。
   - 最终得分 = 0.3 _ TF-IDF 分数 + 0.7 _ 编辑距离分数。
   - 得分高于阈值（默认 0.47）则返回匹配结果。

## 数据库说明

- 问答对通过 `db_manager.py` 管理，支持增删查。
- 支持从数据库批量加载问答对。

## 常见问题

- **如何添加新问答对？**
  - 可通过 `add_qa_pair` 方法添加，或直接操作数据库。
- **支持多轮对话吗？**
  - 当前仅支持单轮问答。
- **如何调整匹配阈值？**
  - 可在 `find_best_match` 方法中修改 `threshold` 参数。

---

如有更多问题或建议，欢迎 Issue 或 PR！
